<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="bingo-styles.html">

<dom-module id="bingo-menu">
  <template>
    <style include="bingo-styles">
       :host {
        display: block;

        padding: 10px;
      }

      paper-button {
        background: #2f415f;
        color: aliceblue;
      }

      *.unselectable {
        -moz-user-select: -moz-none;
        -khtml-user-select: none;
        -webkit-user-select: none;

        /*
     Introduced in IE 10.
     See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
   */
        -ms-user-select: none;
        user-select: none;
      }

      .bouton-droit {
        animation-name: bouton-droit;
        animation-duration: 0.5s;
      }

      .bouton-gauche {
        animation-name: bouton-gauche;
        animation-duration: 0.5s;
      }

      .bouton-quitter-droit {
        animation-name: bouton-quitter-droit;
        animation-duration: 0.5s;
      }

      .bouton-quitter-gauche {
        animation-name: bouton-quitter-gauche;
        animation-duration: 0.5s;
      }

      @keyframes bouton-droit {
        from {
          margin-left: 100vw;
        }
        to {
          margin-left: 0;
        }
      }

      @keyframes bouton-gauche {
        from {
          margin-left: -100vw;
        }
        to {
          margin-left: 0;
        }
      }

      @keyframes bouton-quitter-droit {
        from {
          margin-left: 0;
        }
        to {
          margin-left: 100vw;
        }
      }

      @keyframes bouton-quitter-gauche {
        from {
          margin-left: 0;
        }
        to {
          margin-left: -100vw;
        }
      }
    </style>

    <audio autoplay loop>
      <source src="../sounds/beat.mp3" type="audio/mpeg">
    </audio>

    <div class="card unselectable">
      <h1>Bingo voiture</h1>
      <div style="margin-bottom: 20px;" class="bouton bouton-droit">
        <paper-button on-tap="couleurs">Couleurs</paper-button>
      </div>
      <div style="margin-bottom: 20px;" class="bouton bouton-gauche">
        <paper-button on-tap="immatriculation">Immatriculations</paper-button>
      </div>
      <div style="margin-bottom: 20px;" class="bouton bouton-droit">
        <paper-button on-tap="signalisation">Signalisation</paper-button>
      </div>
      <div style="margin-bottom: 20px;" class="bouton bouton-gauche">
        <paper-button on-tap="fabricants">Fabricants de voiture</paper-button>
      </div>
    </div>
  </template>

  <script>
    class BingoMenu extends Polymer.Element {
      static get is() { return 'bingo-menu'; }
      static get properties() {
        return {
          // animConfig: {
          //   value: {
          //     enter: () => {
          //       debugger;
          //     },
          //     exit: () => {
          //       debugger;
          //       console.log("EXIT!!!");
          //     }
          //   }
          // }
        };
      }

      goto(route) {
        history.pushState({}, '', route)
        window.dispatchEvent(new CustomEvent('location-changed'));
      }

      couleurs() {
        this.goto('couleurs')
      }
      immatriculation() {
        this.goto('immatriculations')
      }
      signalisation() {
        this.goto('signalisation')
      }
      fabricants() {
        this.goto('fabricants')
      }

      quitterMenu(destination) {
        this.shadowRoot.querySelectorAll('.bouton').forEach((bouton, index) => {
          let isPair = index % 2
          bouton.classList.remove('bouton-droit')
          bouton.classList.remove('bouton-gauche')
          if (isPair) {
            bouton.classList.add('bouton-quitter-droit')
          } else {
            bouton.classList.add('bouton-quitter-gauche')
          }
        })
        setTimeout(() => {
          window.location = destination;
        }, 500)

      }
    }

    window.customElements.define(BingoMenu.is, BingoMenu);
  </script>
</dom-module>